PUSH BP
MOV BP,SP
MOV R1,6
MOV R0,BP
SUB R0,R1
MOV R2,R0
MOV R0,[R0]
MOV R1,"Heapset"
EQ R1,R0
JNZ R1,44
MOV R1,"Alloc"
EQ R1,R0
JNZ R1,74
MOV R1,"Free"
EQ R1,R0
JNZ R1,116
MOV R3,SP
MOV R2,2
SUB R3,R2
MOV [R3],-2
POP BP
RET
MOV R3,1024
MOV R6,R3
MOV R4,8
MOV R5,2039
LT R6,R5
JZ R6,66
MOV R6,R3
ADD R3,R4
MOV [R6],R3
MOV R6,R3
JMP 52
MOV R3,2040
MOV [R3],-1
POP BP
RET
MOV R3,1024
MOV R4,-1
MOV R3,[R3]
EQ R4,R3
JZ R4,96
MOV R2,2
MOV R3,SP
SUB R3,R2
MOV [R3],-1
POP BP
RET
MOV R3,1024
MOV R4,[R3]
MOV R5,[R4]
MOV [R3],R5
MOV R2,2
MOV R3,SP
SUB R3,R2
MOV [R3],R4
POP BP
RET
MOV R3,1
ADD R3,R2
MOV R3,[R3]
MOV R4,1024
MOV R5,[R4]
MOV [R3],R5
MOV [R4],R3
POP BP
RET
